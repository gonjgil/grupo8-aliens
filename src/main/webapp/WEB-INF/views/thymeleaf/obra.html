<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ALIENS - Obra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <link rel="stylesheet" href="../../../resources/core/css/galeria_alt.css" /> -->
    <!-- Boostrap core css -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/obra.css}"/>
    <link rel="stylesheet" th:href="@{/css/header.css}"/>
</head>
<body class="bg-gray-100 text-gray-800">
<!-- Header -->
<header class="bg-white p-6 flex justify-between items-center shadow-md">
    <!-- IZQUIERDA -->
    <h1 class="text-4xl font-extrabold text-gray-900 tracking-wider">
        <a th:href="@{/galeria_alt}" class="hover:text-blue-600 transition-colors">
            ALIENS
        </a>
    </h1>

    <!-- DERECHA -->
    <div class="flex items-center gap-6">
        <div th:if="${usuario != null}" class="flex items-center gap-4">
            <div class="cart-icon relative">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
                <span class="badge badge-warning" id="lblCartCount" th:text="${cartCount}"></span>
            </div>

            <div th:text="'Hola, ' + ${usuario.email}" class="text-gray-700 font-medium"></div>

            <form th:action="@{/logout}" method="post">
                <button type="submit"
                        class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 shadow-md">
                    Cerrar sesión
                </button>
            </form>
        </div>

        <div th:unless="${usuario != null}">
            <button th:onclick="|location.href='@{/login}'|"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full transition duration-300 shadow-lg">
                Iniciar Sesión
            </button>
        </div>
    </div>
</header>

<main class="obra-page flex flex-col md:flex-row w-full min-h-screen">

    <div class="obra-left">
        <img th:src="@{${obra.imagenUrl}}"
             alt="Imagen de la obra"
             class="obra-visual"
             tabindex="0" />

        <div class="obra-categorias flex flex-wrap gap-2 mt-4">
            <span th:each="categoria : ${obra.categorias}"
                  th:text="${categoria.categoria}"
                  class="categoria-tag px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition">
            </span>
        </div>
    </div>

    <div class="obra-right w-full md:w-1/2 p-8 flex flex-col justify-between">
        <div class="obra-header mb-8 text-center md:text-left">
            <h1 class="obra-titulo text-4xl font-bold mb-2" th:text="${obra.titulo}"></h1>
            <p class="obra-autor text-xl text-gray-600" th:text="${obra.autor}"></p>
        </div>

        <div class="obra-body flex-grow mb-8">
            <p class="obra-descripcion text-lg" th:text="${obra.descripcion}"></p>
        </div>

        <div class="obra-meta flex flex-col sm:flex-row justify-between items-center gap-4">
            <div class="likes flex items-center gap-2">
                <form th:action="@{/obra/{id}/like(id=${obra.id})}" method="post">
                    <button type="submit"
                            class="like-button px-4 py-2 rounded-full border border-gray-300 hover:bg-blue-50"
                            aria-pressed="false">&#x2764;</button>
                </form>
                <div class="likes flex items-center gap-1">
                    <span th:text="${obra.getCantidadLikes()}"></span>
                    <span class="likes-label text-gray-500 text-sm">personas dieron like</span>
                </div>
            </div>
            <a class="btn btn-primary bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full transition duration-300"
               href="#" id="comprarBtn">Comprar / Más info</a>
        </div>
    </div>
</main>

<!-- Footer -->
<footer
        class="bg-gray-300 p-6 text-center text-gray-700 mt-12 shadow-inner"
>
    <p>&copy; 2025 Grupo 8</p>
    <p class="integrantes">Gil - Solodujin - Brossard - Landín - Santillan</p>
</footer>

</body>
</html>